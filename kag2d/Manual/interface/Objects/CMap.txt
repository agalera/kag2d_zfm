--- SCRIPT INTERFACE FOR BUILD 3570 ---
-- CLASS 'CMap' --

uint tilemapwidth
uint tilemapheight
float tilesize
bool topBorder
bool bottomBorder
bool leftBorder
bool rightBorder
bool legacyTileVariations
bool legacyTileEffects
bool legacyTileDestroy
bool legacyTileMinimap
bool debugRaycasts
int debugRaycastsMax

void server_SetTile(Vec2f posWorldspace, const Tile&in tile)
void server_SetTile(Vec2f posWorldspace, const uint16 type)
void SetTile(uint offset, uint t)
void SetTileDamage(uint offset, uint t)
void SetTileDirt(uint offset, uint t)
void SetTileSupport(uint offset, uint t)
uint8 getTileDirt(uint offset)
uint8 getTileSupport(uint offset)
bool hasTileFlag(uint offset, uint flags)
void AddTileFlag(uint offset, uint flags)
void RemoveTileFlag(uint offset, uint flags)
uint getTileFlags(uint offset)
void SetTileFlags_Legacy(uint offset)
Tile getTile(Vec2f posWorldspace)
Tile getTileFromTileSpace(Vec2f posTilespace)
Tile getTile(uint offset)
Vec2f getTileWorldPosition(Vec2f posWorldspace)
Vec2f getTileWorldPosition(uint offset)
uint getTileOffset(Vec2f posWorldspace)
uint getTileOffsetFromTileSpace(Vec2f posTilespace)
Vec2f getTileSpacePosition(Vec2f posWorldspace)
Vec2f getTileSpacePosition(uint offset)
Vec2f getAlignedWorldPos(Vec2f posWorldspace)
bool hasSupportAtPos(Vec2f posWorldspace)
void server_DestroyTile(Vec2f posWorldspace, float damage)
void server_DestroyTile(Vec2f posWorldspace, float damage, CBlob@ damager)
void server_setFloodWaterWorldspace(Vec2f posWorldspace, bool water)
void server_setFloodWaterTilespace(int xTilespace, int yTilespace, bool water)
void server_setFloodWaterOffset(uint offset, bool water)
void server_setFireWorldspace(Vec2f posWorldspace, bool fire)
void server_setFireTilespace(int xWorldspace, int yWorldspace, bool fire)
bool isTileInFire(int xTilespace, int yTilespace)
bool isInFire(Vec2f posWorldspace)
bool isTileSolid(uint16 tile)
bool isTileSolid(const Tile&in tile)
bool isTileSolid(Vec2f posWorldspace)
bool isTileCollapsing(uint offset)
bool isTileCollapsing(Vec2f posWorldspace)
bool isTileLadder(const Tile&in tile)
bool isTileGround(uint16 tile)
bool hasTileSolidBlobs(const Tile&in tile)
bool hasTileSolidBlobsNoPlatform(const Tile&in tile)
bool getBlobsFromTile(const Tile&in tile, CBlob@[]&inout blobs)
bool getBlobsFromOffset(const int offset, CBlob@[]&inout blobs)
bool isTileBackground(const Tile&in tile)
bool isTileBackgroundNonEmpty(const Tile&in tile)
bool isTileGroundBack(uint16 tile)
bool rayCastSolid(Vec2f startPosWorldspace, Vec2f endPosWorldspace, Vec2f&out pointPosWorldspace)
bool rayCastSolid(Vec2f startPosWorldspace, Vec2f endPosWorldspace)
bool rayCastSolidNoBlobs(Vec2f startPosWorldspace, Vec2f endPosWorldspace)
bool rayCastSolidNoBlobs(Vec2f startPosWorldspace, Vec2f endPosWorldspace, Vec2f&out pointPosWorldspace)
bool isInWater(Vec2f posWorldspace)
void SplashEffect(Vec2f posWorldspace, Vec2f vel, float radius)
void setWaterLevel(int tile_height)
int getLandHeightAtX(int x)
int getLandYAtX(int x)
bool isBelowLand(Vec2f pos)
void SetDayTime(float time)
float getDayTime()
SColor getColorLight(Vec2f pos)
bool isTileStone(uint16 tile)
bool isTileThickStone(uint16 tile)
bool isTileGold(uint16 tile)
bool isTileGrass(uint16 tile)
bool isTileWood(uint16 tile)
bool isTileCastle(uint16 tile)
bool isTileBedrock(uint16 tile)
bool isTileSand(uint16 tile)
bool isTileGroundStuff(uint16 tile)
bool isTilePlatform(const Tile&in tile)
int getTimeSinceStart()
bool RemoveScript(const string&in fileName)
bool AddScript(const string&in fileName)
bool hasScript(const string&in fileName)
bool getBlobs(CBlob@[]@ list)
bool getBlobsInRadius(Vec2f posWorldspace, float radius, CBlob@[]@ list)
bool getBlobsInBox(Vec2f upperleftWorldspace, Vec2f lowerrightWorldspace, CBlob@[]@ list)
bool isBlobInRadius(const string&in name, Vec2f pos, float radius)
bool getBlobsAtPosition(Vec2f posWorldspace, CBlob@[]@ list)
bool isBlobWithTagInRadius(const string&in name, Vec2f pos, float radius)
bool getHitInfosFromArc(Vec2f originPosWorldspace, float angleDegrees, float arcDegrees, float distance, CBlob@ hitter, HitInfo@[]@ list)
bool getHitInfosFromArc(Vec2f originPosWorldspace, float angleDegrees, float arcDegrees, float distance, CBlob@ hitter, bool raycast_blobs, HitInfo@[]@ list)
bool getHitInfosFromRay(Vec2f originPosWorldspace, float angleDegrees, float distance, CBlob@ hitter, HitInfo@[]@ list)
bool getHitInfosFromCircle(Vec2f originPosWorldspace, float radius, CBlob@ hitter, HitInfo@[]@ list)
CBlob@ getBlobAtPosition(Vec2f posWorldspace)
void DrawTile(Vec2f posWorldspace, uint16 tile, SColor color, float scale, bool resolutionScale)
void UpdateLightingAtPosition(Vec2f posWorldspace, float radius)
void CreateTileMap(int width, int height, int tileSize, const string&in tilesSheet)
void AddMarker(Vec2f posWorldspace, const string&in name)
bool getMarker(const string&in name, Vec2f&out posWorldspace)
bool hasMarker(const string&in name)
bool getMarkers(const string&in name, Vec2f[]@ posListTilespace)
bool getClosestMarker(Vec2f posWorldspace, const string&in name, Vec2f&out markerPosition)
void RemoveMarkers(const string&in name)
void RemoveMarker(const string&in name, int index)
void RemoveAllMarkers()
Sector@ server_AddSector(Vec2f upperleftPosWorldspace, Vec2f lowerrightPosWorldspace, const string&in name, const string&in scriptFilename, uint16 ownerID)
Sector@ server_AddSector(Vec2f upperleftPosWorldspace, Vec2f lowerrightPosWorldspace, const string&in name, const string&in scriptFilename)
Sector@ server_AddSector(Vec2f upperleftPosWorldspace, Vec2f lowerrightPosWorldspace, const string&in name)
Sector@ server_AddSector(Vec2f posWorldspace, float radius, const string&in name, const string&in scriptFilename, uint16 ownerID)
Sector@ server_AddSector(Vec2f posWorldspace, float radius, const string&in name, const string&in scriptFilename)
Sector@ server_AddSector(Vec2f posWorldspace, float radius, const string&in name)
Sector@ server_AddMovingSector(Vec2f offsetUpperleftWorldspace, Vec2f offsetLowerrightWorldspace, const string&in name, uint16 ownerID)
Sector@ getSector(const string&in name)
Sector@ getSectorAtPosition(Vec2f posWorldspace)
Sector@ getSectorAtPosition(Vec2f posWorldspace, const string&in name)
bool getSectors(const string&in name, Sector@[]@ sectors)
bool getSectorsAtPosition(Vec2f posWorldspace, Sector@[]@ sectors)
void RemoveSectors(const string&in name)
void RemoveSectorsAtPosition(Vec2f posWorldspace)
void RemoveSectorsAtPosition(Vec2f posWorldspace, const string&in name)
void RemoveSectorsAtPosition(Vec2f posWorldspace, const string&in name, const uint16 id)
void RemoveAllSectors()
bool getBlobsInSector(Sector@ sector, CBlob@[]@ list)
void CreateSky(SColor backColor)
void CreateSky(SColor backColor, Vec2f scrollSpeed, const int starmapSeed, const string&in cloudsFilename, const int clouds)
void CreateSkyGradient(const string&in skygradientFile)
void AddBackground(const string&in textureFilename, Vec2f offset, Vec2f scrollSpeed, SColor baseColor)
bool getHighLevelNodes(Vec2f posWorldspace, int distance, CHighMapNode@[]@ nodes)
void ResetHighLevelNodes()
CHighMapNode@ getHighLevelNode(Vec2f posWorldspace)
string getMapName()
uint getMapSeed()
Vec2f getMapDimensions()
void set(const string&in, ?&in)
bool get(const string&in, ?&out) const
void set(const string&in, int64&in)
bool get(const string&in, int64&out) const
void set(const string&in, double&in)
bool get(const string&in, double&out) const
bool getAt(const string&in, int index, ?&out) const
bool getLast(const string&in, ?&out) const
void setAt(const string&in, int index, ?&in)
void push(const string&in, ?&in)
void removeAt(const string&in, int index)
void removeElement(const string&in, ?&in)
void clear(const string&in)
void debug()
void MakeMiniMap()
void EditMiniMap(int x, int y)
bool exists(const string&in)
void set_s8(const string&in, int8 v)
int8 get_s8(const string&in)
void set_u8(const string&in, uint8 v)
uint8 get_u8(const string&in)
void set_s16(const string&in, int16 v)
int16 get_s16(const string&in)
void set_u16(const string&in, uint16 v)
uint16 get_u16(const string&in)
void set_netid(const string&in, uint16 v)
uint16 get_netid(const string&in)
void set_s32(const string&in, int v)
int get_s32(const string&in)
void set_u32(const string&in, uint v)
uint get_u32(const string&in)
void set_f32(const string&in, float v)
float get_f32(const string&in)
void set_bool(const string&in, bool v)
bool get_bool(const string&in)
void set_string(const string&in, string v)
string get_string(const string&in)
void set_Vec2f(const string&in, Vec2f v)
Vec2f get_Vec2f(const string&in)
void set_TileType(const string&in, uint16 v)
uint16 get_TileType(const string&in)
void set_CBitStream(const string&in, CBitStream&inout bs)
void get_CBitStream(const string&in, CBitStream&inout bs)
void Sync(const string&in name, bool relayToClients)
void SyncToPlayer(const string&in name, CPlayer@ player)
void Tag(const string&in name)
void Untag(const string&in name)
bool hasTag(const string&in name)
int8 add_s8(const string&in, int8 value)
int8 sub_s8(const string&in, int8 value)
int16 add_s16(const string&in, int16 value)
int16 sub_s16(const string&in, int16 value)
int add_s32(const string&in, int value)
int sub_s32(const string&in, int value)
uint8 add_u8(const string&in, uint8 value)
uint8 sub_u8(const string&in, uint8 value)
uint16 add_u16(const string&in, uint16 value)
uint16 sub_u16(const string&in, uint16 value)
uint add_u32(const string&in, uint value)
uint sub_u32(const string&in, uint value)
float add_f32(const string&in, float value)
float sub_f32(const string&in, float value)
void SetBorderColourLeft(const SColor&in col)
void SetBorderColourRight(const SColor&in col)
void SetBorderColourTop(const SColor&in col)
void SetBorderColourBottom(const SColor&in col)
void SetBorderFadeWidth(const float col)
